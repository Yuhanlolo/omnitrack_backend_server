<ng-container *ngIf="currentPlanData!=null">
  <div class="code-editor-container">
    <mat-sidenav-container class="panel-container">
      <mat-sidenav #global mode="side" opened>
        <div class="menu-panel">
          <div class="form-group">
            <label for="planNameInput" class="small">Plan Name{{currentPlanData.name !== originalPlanData.name? '*' : ''}}</label>
            <input id="planNameInput" type="text" class="form-control" [(ngModel)]="currentPlanData.name">
          </div>

          <div class="form-group no-padding-top flex-container flex-align-items-center flex-stretch">
            <label class="small no-margin">Permissions</label>
            <app-lock-flag-button [model]="currentPlanData.data.app" (flagChange)="onAppFlagsChanged($event)" lockType="app"></app-lock-flag-button>
          </div>

          <div class="subheader">Trackers</div>
            
          <ng-container *ngIf="currentPlanData.data && currentPlanData.data.trackers && currentPlanData.data.trackers.length > 0">
              <app-selectable-menu-item *ngFor="let tracker of currentPlanData.data.trackers" [title]="tracker.name" [color]="getTrackerColorString(tracker)" [selected]="selectedEntity === tracker" (onClick)="onTrackerClicked(tracker)"></app-selectable-menu-item>
            </ng-container>
          <div class="subheader">Triggers</div>
        </div>
      </mat-sidenav>
      <mat-sidenav-content>
        <div class="main-panel-container">
          <app-tracker-detail-panel *ngIf="selectedType === 'tracker'" [tracker] = "selectedEntity"></app-tracker-detail-panel>
          <div class="preview-panel">

          </div>
        </div>
      </mat-sidenav-content>
    </mat-sidenav-container>
  </div>
  <div class="code-editor-footer flex-container flex-align-items-center">
    <div class="flex-filler"></div>
    <button mat-button color="accent" [disabled]="isChanged()===false" (click)="onDiscardChangesClicked()">Dicard Changes</button>
    <button mat-button color="primary" (click)="onSaveClicked()" [disabled]="isChanged()===false">Save Changes</button>
  </div>
</ng-container>
